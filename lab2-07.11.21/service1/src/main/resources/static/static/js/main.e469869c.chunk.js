(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{191:function(e,t,n){},192:function(e,t,n){},333:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(27),i=n.n(a),o=(n(191),n(52)),s=(n(192),n(335)),l=n(77),u=n(349),d=n(350),j=n(351),b=function(e){if(e.ok)return e.json();throw new Error(e.json())},h="https://localhost:26557",O="https://localhost:26558/killer",p={PERSONS:"".concat(h,"/api/persons/"),DRAGONS1:"".concat(h,"/api/dragons/"),DRAGONS2:"".concat(O,"/api/dragons/"),TEAMS:"".concat(O,"/api/teams/")},f=function(e){return fetch("".concat(e),{method:"GET"}).then(b)},m=function(e,t,n){return fetch("".concat(e).concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(b)},x=function(e,t){return fetch("".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(b)},y=function(e,t){return fetch("".concat(e).concat(t),{method:"DELETE"}).then(b)},g=n(130),S=n(49),v=n(341),k=n(342),I=n(51),w=n(179),E=n(339),N=n(343),T=n(183),C=n(123),A=n(338),R=n(340),_=n(336),D=n(146),G=n(126),L=n(91),P=n(344),F=n(345),M=n(346),V=n(101),J=n(347),K=n(348),Y=n(337),B=n(57),W=n.n(B),z=n(8),H=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(z.jsxs)(A.a,{onFinish:t,children:[" ",Object.keys(e).filter((function(e){return"id"!==e.toLowerCase()})).map((function(t){var c;return Object(z.jsx)(A.a.Item,{label:t.toLowerCase(),name:t,children:(c=e[t],"enum"===c.type?Object(z.jsx)(C.a.Group,{optionType:"button",defaultValue:n[t],options:e[t].vals}):"number"===c.type?Object(z.jsx)(R.a,{defaultValue:n[t]}):"date"===c.type?Object(z.jsx)(Y.a,{format:"DD.MM.YYYY",defaultValue:W()()}):"array"===c.type&&void 0!==n[t]?Object(z.jsx)(v.a,{defaultValue:str}):Object(z.jsx)(v.a,{defaultValue:n[t]}))})})),Object(z.jsx)(A.a.Item,{children:Object(z.jsx)(I.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})},q=n(172),U=n.n(q),X=n(184),Q=["editing","dataIndex","title","inputType","record","index","children"],Z=function(e){var t=e.editing,n=e.dataIndex,c=e.title,r=e.inputType,a=(e.record,e.index,e.children),i=Object(X.a)(e,Q);return Object(z.jsx)("td",Object(S.a)(Object(S.a)({},i),{},{children:t?Object(z.jsx)(A.a.Item,{name:n,style:{margin:0},rules:[{required:!0,message:"Please Input ".concat(c,"!")}],children:"number"===r?Object(z.jsx)(R.a,{}):Object(z.jsx)(v.a,{})}):a}))},$={WATER:"geekblue",AIR:"blue",FIRE:"volcano",UNKNOWN:"magenta"},ee=function(){return fetch("".concat(p.DRAGONS1,"grouped_by_type"),{method:"GET"}).then(b)},te=function(e){return fetch("".concat(p.DRAGONS1,"find_with_killer_weaker_then?killer_id=").concat(e),{method:"GET"}).then(b)},ne=function(e){return fetch("".concat(p.DRAGONS2,"find_by_cave_depth?type=").concat(e),{method:"GET"}).then(b)},ce={GREEN:"green",YELLOW:"yellow",BROWN:"gold"},re=function(e){return fetch("".concat(p.PERSONS,"find_person_included_in_name?name=").concat(e),{method:"GET"}).then(b)},ae=function(e,t){return fetch("".concat(p.TEAMS).concat(e,"?candidate_id=").concat(t),{method:"POST"}).then(b)},ie=function(e){var t=e.entity,n=e.template,r=e.removable,a=e.editable,i=function(e){return Object.keys(e).map((function(t){return{title:t.toUpperCase(),key:t,dataIndex:t,editable:"id"!==t,inputType:e[t].type,sorter:function(n,c){var r=n[t],a=c[t],i=e[t].type;return"number"===i?r-a:"string"===i?r.length-a.length:"boolean"===i?r&&a:"date"===i?new Date(r)-new Date(a):void 0}}})).filter((function(e){return void 0!==e&&null!==e}))}(n),l=Object(c.useState)([]),u=Object(o.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)(!0),h=Object(o.a)(b,2),O=h[0],p=h[1],Y=Object(c.useState)([]),B=Object(o.a)(Y,2),W=B[0],q=B[1],X=Object(c.useState)(!1),Q=Object(o.a)(X,2),ce=Q[0],ie=Q[1],oe=Object(c.useState)(""),se=Object(o.a)(oe,2),le=se[0],ue=se[1],de=Object(c.useState)(""),je=Object(o.a)(de,2),be=je[0],he=je[1],Oe=Object(c.useState)(""),pe=Object(o.a)(Oe,2),fe=pe[0],me=pe[1],xe=function(e,t,n){t(),ue(e[0]),he(n)},ye=function(e){e(),ue("")};Object(c.useEffect)((function(){f(t).then((function(e){p(!1),j(e.map((function(e){var n=Object(S.a)(Object(S.a)({},e),{},{key:e.id});return"dragons"===t.split("/").slice(-2)[0]&&(n.x=e.coordinates.x,n.y=e.coordinates.y,n.z=e.coordinates.z,delete n.coordinates),n})))})).catch((function(e){return w.b.error(e)}))}),[t]);var ge=Object(g.a)(i.map((function(e){return Object(S.a)(Object(S.a)({},e),(t=e.dataIndex,{filterDropdown:function(e){var n=e.setSelectedKeys,c=e.selectedKeys,r=e.confirm,a=e.clearFilters;return Object(z.jsxs)("div",{children:[Object(z.jsx)(v.a,{placeholder:"Search ".concat(t),value:c[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return xe(c,r,t)}}),Object(z.jsxs)(k.b,{children:[Object(z.jsx)(I.a,{type:"primary",icon:Object(z.jsx)(G.a,{}),onClick:function(){return xe(c,r,t)},children:"Search"}),Object(z.jsx)(I.a,{onClick:function(){return ye(a)},children:"Reset"})]})]})},filterIcon:function(e){return Object(z.jsx)(G.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(e,n){return n[t]?n[t].toString().toLowerCase().includes(e.toLowerCase()):""},render:function(e){var n;return be===t?Object(z.jsx)(U.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[le],autoEscape:!0,textToHighlight:null!==(n=null===e||void 0===e?void 0:e.toString())&&void 0!==n?n:""}):e}}));var t})));a&&ge.push({title:"ACTIONS",dataIndex:"actions",fixed:"right",render:function(e,c){return Object(z.jsx)(E.a.Link,{children:Object(z.jsx)(N.a,{content:H(n,(function(e){var n=d.filter((function(e){return e.id==c.id}))[0],r=Object(S.a)(Object(S.a)({},d.find((function(e){return e.id==c.id}))),JSON.parse(JSON.stringify(e)));0!==Object.keys(n).length?m(t,c.id,r).then((function(e){j([].concat(Object(g.a)(d.filter((function(e){return e.id!==c.id}))),[r])),w.b.success(e.msg)})).catch((function(e){return w.b.error(e.message)})):w.b.warning("Nothing to modify")}),c),children:"Edit"})})}});var Se=[Object(z.jsx)(N.a,{content:Object(z.jsxs)("div",{children:[H(n,(function(e){x(t,e).then((function(t){console.info(t),j([].concat(Object(g.a)(d),[Object(S.a)(Object(S.a)({},e),{},{id:t})])),ie(!1)})).catch((function(e){return w.b.error(e)}))})),Object(z.jsx)(I.a,{shape:"round",danger:!0,icon:Object(z.jsx)(L.a,{}),size:"small",onClick:function(){return ie(!1)}})]}),visible:ce,children:Object(z.jsx)(I.a,{type:"primary",icon:Object(z.jsx)(P.a,{}),ghost:!0,onClick:function(){return ie(!0)},children:"Add record"})}),Object(z.jsx)(I.a,{icon:Object(z.jsx)(F.a,{}),ghost:!0,disabled:!r,danger:!0,onClick:function(){0===W.length?w.b.warning("Nothing is selected"):Promise.all(W.map((function(e){return y(t,e)}))).then((function(){j(d.filter((function(e){return!W.includes(e.id)}))),w.b.success("All entities was deleted")}))},children:"Remove"})];switch(t.split("/").slice(-2)[0]){case"dragons":Se.push(Object(z.jsx)(N.a,{trigger:"hover",onVisibleChange:function(e){e&&ee().then((function(e){return me(e)}))},content:Object.keys(fe).map((function(e){return Object(z.jsxs)(T.a,{color:$[e],children:[e," = ",fe[e]]})})),title:"Count dragons by type",children:Object(z.jsx)(I.a,{icon:Object(z.jsx)(M.a,{}),ghost:!0,children:"Statistic"})})),Se.push(Object(z.jsx)(N.a,{trigger:"click",content:Object(z.jsx)(v.a.Search,{onSearch:function(e){isNaN(e)?w.b.error("You should write id number of killer"):te(e).then((function(t){0!==t.length?j(t):w.b.warning("There are no dragons with a killer weaker then killer#".concat(e))}))},enterButton:!0,placeholder:"id"}),children:Object(z.jsx)(I.a,{icon:Object(z.jsx)(V.a,{}),ghost:!0,children:"Find with killer weaker then"})}));var ve=["MIN","MAX"];Se.push(Object(z.jsx)(N.a,{trigger:"click",content:Object(z.jsx)(C.a.Group,{optionType:"button",defaultValue:ve[0],options:ve,onChange:function(e){ne(e.target.value).then((function(e){0!==e.length?j(e):w.b.warning("There are no dragons now")}))}}),children:Object(z.jsx)(I.a,{icon:Object(z.jsx)(J.a,{}),ghost:!0,children:"Find with deepest/highest cave"})}));break;case"persons":Se.push(Object(z.jsx)(N.a,{trigger:"click",content:Object(z.jsx)(v.a.Search,{onSearch:function(e){re(e).then((function(t){0!==t.length?j(t):w.b.warning("There are no persons included in name ".concat(e))}))},enterButton:!0,placeholder:"name"}),children:Object(z.jsx)(I.a,{icon:Object(z.jsx)(K.a,{}),ghost:!0,children:"Find person included in name"})}));break;case"teams":Se.push(Object(z.jsx)(N.a,{trigger:"click",content:Object(z.jsxs)(A.a,{onFinish:function(e){ae(e.teamId,e.personId).then((function(t){w.b.success(t),d.find((function(t){return t.teamId==e.teamId})).membersIds.push(e.personId),j(d)})).catch((function(e){return w.b.error(e)}))},children:[Object(z.jsx)(A.a.Item,{label:"teamId",name:"teamId",required:!0,children:Object(z.jsx)(R.a,{placeholder:"teamId"})}),Object(z.jsx)(A.a.Item,{label:"personId",name:"personId",required:!0,children:Object(z.jsx)(R.a,{placeholder:"personId"})}),Object(z.jsx)(A.a.Item,{children:Object(z.jsx)(I.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}),children:Object(z.jsx)(I.a,{icon:Object(z.jsx)(K.a,{}),ghost:!0,children:"Bind person to team"})}))}return Object(z.jsxs)(s.a,{className:"site-layout",children:[Object(z.jsx)(D.Header,{children:Object(z.jsx)(k.b,{children:Se})}),Object(z.jsx)(D.Content,{children:Object(z.jsx)(_.a,{columns:ge,rowSelection:{selectedRowKeys:W,onChange:function(e){return q(e)},selections:[_.a.SELECTION_ALL,_.a.SELECTION_INVERT,_.a.SELECTION_NONE]},dataSource:d,loading:O,components:{body:{cell:Z}},pagination:{position:["bottomCenter"]}})})]})};ie.defaultProps={enumFields:new Map};var oe=ie,se=function(){var e=Object(z.jsx)(oe,{entity:p.PERSONS,template:{id:{type:"number"},name:{type:"string"},height:{type:"number"},weight:{type:"number"},passportId:{type:"string"},hairColor:{type:"enum",vals:Object.keys(ce)}},removable:!0,editable:!0}),t=Object(z.jsx)(oe,{entity:p.DRAGONS1,template:{id:{type:"number"},name:{type:"string"},creationDate:{type:"date"},age:{type:"number"},wingspan:{type:"number"},color:{type:"enum",vals:Object.keys(ce)},type:{type:"enum",vals:Object.keys($)},x:{type:"number"},y:{type:"number"},z:{type:"number"},killerId:{type:"number"}},removable:!0,editable:!0}),n=Object(z.jsx)(oe,{entity:p.TEAMS,template:{id:{type:"number"},name:{type:"string"},membersIds:{type:"array"}},removable:!1,editable:!1}),r=Object(c.useState)(e),a=Object(o.a)(r,2),i=a[0],b=a[1],h=Object(c.useState)(!1),O=Object(o.a)(h,2),f=O[0],m=O[1];return Object(z.jsxs)(s.a,{style:{minHeight:"100vh"},children:[Object(z.jsx)(s.a.Sider,{collapsible:!0,collapsed:f,onCollapse:function(){return m(!f)},children:Object(z.jsxs)(l.a,{defaultSelectedKeys:["1"],mode:"inline",children:[Object(z.jsx)(l.a.Item,{icon:Object(z.jsx)(u.a,{}),onClick:function(){return b(e)},children:"Persons"}),Object(z.jsx)(l.a.Item,{icon:Object(z.jsx)(d.a,{}),onClick:function(){return b(t)},children:"Dragons"}),Object(z.jsx)(l.a.Item,{icon:Object(z.jsx)(j.a,{}),onClick:function(){return b(n)},children:"Teams"})]})}),Object(z.jsxs)(s.a,{className:"site-layout",children:[Object(z.jsx)(s.a.Content,{children:Object(z.jsx)("div",{className:"site-layout-background",style:{minHeight:360},children:i})}),Object(z.jsx)(s.a.Footer,{style:{textAlign:"center"},children:Object(z.jsx)("a",{href:"https://se.ifmo.ru/~s265570/cv/",children:"Kulbako Artemy 2021"})})]})]})};i.a.render(Object(z.jsx)(r.a.StrictMode,{children:Object(z.jsx)(se,{})}),document.getElementById("root"))}},[[333,1,2]]]);
//# sourceMappingURL=main.e469869c.chunk.js.map